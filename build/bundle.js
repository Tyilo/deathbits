var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function a(){return h(" ")}function d(){return h("")}function p(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e){(null!=e||t.value)&&(t.value=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let v;function b(t){v=t}const $=[],x=[],w=[],H=[],C=Promise.resolve();let _=!1;function A(t){w.push(t)}function M(){const t=new Set;do{for(;$.length;){const t=$.shift();b(t),k(t.$$)}for(;x.length;)x.pop()();for(let e=0;e<w.length;e+=1){const n=w[e];t.has(n)||(n(),t.add(n))}w.length=0}while($.length);for(;H.length;)H.pop()();_=!1}function k(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const S=new Set;function B(t,e){-1===t.$$.dirty[0]&&($.push(t),_||(_=!0,C.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function E(o,c,u,s,i,f,h=[-1]){const a=v;b(o);const d=c.props||{},p=o.$$={fragment:null,ctx:null,props:f,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:h};let g=!1;var m,q;p.ctx=u?u(o,d,(t,e,n=e)=>(p.ctx&&i(p.ctx[t],p.ctx[t]=n)&&(p.bound[t]&&p.bound[t](n),g&&B(o,t)),e)):[],p.update(),g=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),c.target&&(c.hydrate?p.fragment&&p.fragment.l(function(t){return Array.from(t.childNodes)}(c.target)):p.fragment&&p.fragment.c(),c.intro&&((m=o.$$.fragment)&&m.i&&(S.delete(m),m.i(q))),function(t,n,o){const{fragment:c,on_mount:u,on_destroy:s,after_update:i}=t.$$;c&&c.m(n,o),A(()=>{const n=u.map(e).filter(r);s?s.push(...n):l(n),t.$$.on_mount=[]}),i.forEach(A)}(o,c.target,c.anchor),M()),b(a)}function N(t,e,n){const l=t.slice();return l[19]=e[n],l[21]=n,l}function P(t,e,n){const l=t.slice();return l[24]=e[n],l}function F(t,e,n){const l=t.slice();return l[27]=e[n],l}function L(t,e,n){const l=t.slice();return l[22]=e[n],l[23]=e,l[21]=n,l}function R(t,e,n){const l=t.slice();return l[30]=e[n],l}function j(t,e,n){const l=t.slice();return l[36]=e[n],l}function O(t,e,n){const l=t.slice();return l[33]=e[n],l}function T(t){let e,n=Array(t[7]),l=[];for(let e=0;e<n.length;e+=1)l[e]=z(j(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=d()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);u(t,e,n)},p(t,r){if(128&r[0]){const r=n.length;let o;for(n=Array(t[7]),o=r;o<n.length;o+=1){j(t,n,o);l[o]||(l[o]=z(),l[o].c(),l[o].m(e.parentNode,e))}for(o=n.length;o<r;o+=1)l[o].d(1);l.length=n.length}},d(t){i(l,t),t&&s(e)}}}function W(t){let e,n=t[2],l=[];for(let e=0;e<n.length;e+=1)l[e]=D(O(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=d()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);u(t,e,n)},p(t,r){if(4&r[0]){let o;for(n=t[2],o=0;o<n.length;o+=1){const c=O(t,n,o);l[o]?l[o].p(c,r):(l[o]=D(c),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){i(l,t),t&&s(e)}}}function z(t){let e;return{c(){e=h("☐")},m(t,n){u(t,e,n)},d(t){t&&s(e)}}}function D(t){let e,n=ot(t[33])+"";return{c(){e=h(n)},m(t,n){u(t,e,n)},p(t,l){4&l[0]&&n!==(n=ot(t[33])+"")&&m(e,n)},d(t){t&&s(e)}}}function G(t){let e,n,l,r=t[4],o=[];for(let e=0;e<r.length;e+=1)o[e]=I(R(t,r,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h("\n      ("),n=h(t[3]),l=h(")")},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);u(t,e,r),u(t,n,r),u(t,l,r)},p(t,l){if(16&l[0]){let n;for(r=t[4],n=0;n<r.length;n+=1){const c=R(t,r,n);o[n]?o[n].p(c,l):(o[n]=I(c),o[n].c(),o[n].m(e.parentNode,e))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}8&l[0]&&m(n,t[3])},d(t){i(o,t),t&&s(e),t&&s(n),t&&s(l)}}}function I(t){let e,n=t[30]+"";return{c(){e=h(n)},m(t,n){u(t,e,n)},p(t,l){16&l[0]&&n!==(n=t[30]+"")&&m(e,n)},d(t){t&&s(e)}}}function J(t){let e,n;return{c(){e=f("th"),n=h("Scores"),g(e,"colspan",t[0]),g(e,"class","svelte-16hqqup")},m(t,l){u(t,e,l),c(e,n)},p(t,n){1&n[0]&&g(e,"colspan",t[0])},d(t){t&&s(e)}}}function K(t){let e,n,l=(void 0===t[27]?"-":t[27])+"";return{c(){e=f("td"),n=h(l),g(e,"class","number svelte-16hqqup")},m(t,l){u(t,e,l),c(e,n)},p(t,e){2&e[0]&&l!==(l=(void 0===t[27]?"-":t[27])+"")&&m(n,l)},d(t){t&&s(e)}}}function Q(t){let e,n,l=t[24]+"";return{c(){e=f("td"),n=h(l),g(e,"class","number svelte-16hqqup")},m(t,l){u(t,e,l),c(e,n)},p(t,e){2&e[0]&&l!==(l=t[24]+"")&&m(n,l)},d(t){t&&s(e)}}}function U(t){let e,n,r,o,d,m,v,b,$,x,w,H,C,_=[...t[22].bitHistory].reverse(),A=[];for(let e=0;e<_.length;e+=1)A[e]=K(F(t,_,e));function M(){t[16].call(o,t[22])}let k=t[22].scoreHistory,S=[];for(let e=0;e<k.length;e+=1)S[e]=Q(P(t,k,e));function B(...e){return t[17](t[21],...e)}return{c(){e=f("tr");for(let t=0;t<A.length;t+=1)A[t].c();n=a(),r=f("td"),o=f("input"),m=a();for(let t=0;t<S.length;t+=1)S[t].c();v=a(),b=f("td"),$=f("button"),x=h("x"),H=a(),g(o,"placeholder",d="Player "+(t[21]+1)),g(o,"class","playerName svelte-16hqqup"),g(o,"size","5"),g(r,"class","svelte-16hqqup"),$.disabled=w=1===t[1].length,g($,"type","checkbox"),g($,"class","svelte-16hqqup"),g(b,"class","svelte-16hqqup"),g(e,"class","svelte-16hqqup"),y(e,"winner",lt(t[3],t[21])),C=[p(o,"input",M),p(o,"change",rt),p(o,"keydown",rt),p(o,"keyup",rt),p($,"click",B)]},m(l,s){u(l,e,s);for(let t=0;t<A.length;t+=1)A[t].m(e,null);c(e,n),c(e,r),c(r,o),q(o,t[22].name),c(e,m);for(let t=0;t<S.length;t+=1)S[t].m(e,null);c(e,v),c(e,b),c(b,$),c($,x),c(e,H)},p(l,r){if(t=l,2&r[0]){let l;for(_=[...t[22].bitHistory].reverse(),l=0;l<_.length;l+=1){const o=F(t,_,l);A[l]?A[l].p(o,r):(A[l]=K(o),A[l].c(),A[l].m(e,n))}for(;l<A.length;l+=1)A[l].d(1);A.length=_.length}if(2&r[0]&&o.value!==t[22].name&&q(o,t[22].name),2&r[0]){let n;for(k=t[22].scoreHistory,n=0;n<k.length;n+=1){const l=P(t,k,n);S[n]?S[n].p(l,r):(S[n]=Q(l),S[n].c(),S[n].m(e,v))}for(;n<S.length;n+=1)S[n].d(1);S.length=k.length}2&r[0]&&w!==(w=1===t[1].length)&&($.disabled=w),8&r[0]&&y(e,"winner",lt(t[3],t[21]))},d(t){t&&s(e),i(A,t),i(S,t),l(C)}}}function V(e){let n;return{c(){n=h("?")},m(t,e){u(t,n,e)},p:t,d(t){t&&s(n)}}}function X(t){let e,n,l,r,o,i,a,d=t[19]+"",p=Math.pow(6,t[7])+"",g=(t[19]/Math.pow(6,t[7])).toFixed(2)+"";return{c(){e=f("sup"),n=h(d),l=h("\n              ⁄\n              "),r=f("sub"),o=h(p),i=h("\n              ≈ "),a=h(g)},m(t,s){u(t,e,s),c(e,n),u(t,l,s),u(t,r,s),c(r,o),u(t,i,s),u(t,a,s)},p(t,e){32&e[0]&&d!==(d=t[19]+"")&&m(n,d),128&e[0]&&p!==(p=Math.pow(6,t[7])+"")&&m(o,p),160&e[0]&&g!==(g=(t[19]/Math.pow(6,t[7])).toFixed(2)+"")&&m(a,g)},d(t){t&&s(e),t&&s(l),t&&s(r),t&&s(i),t&&s(a)}}}function Y(t){let e,n,l,r,o;function i(t,e){return null!==t[19]?X:V}let d=i(t),p=d(t);return{c(){e=f("tr"),n=f("td"),l=h(t[21]),r=a(),o=f("td"),p.c(),g(n,"class","svelte-16hqqup"),g(o,"class","svelte-16hqqup"),g(e,"class","svelte-16hqqup")},m(t,s){u(t,e,s),c(e,n),c(n,l),c(e,r),c(e,o),p.m(o,null)},p(t,e){d===(d=i(t))&&p?p.p(t,e):(p.d(1),p=d(t),p&&(p.c(),p.m(o,null)))},d(t){t&&s(e),p.d()}}}function Z(e){let n;return{c(){n=h("?")},m(t,e){u(t,n,e)},p:t,d(t){t&&s(n)}}}function tt(t){let e,n=t[6].toFixed(2)+"";return{c(){e=h(n)},m(t,n){u(t,e,n)},p(t,l){64&l[0]&&n!==(n=t[6].toFixed(2)+"")&&m(e,n)},d(t){t&&s(e)}}}function et(e){let n,r,o,d,m,q,y,v,b,$,x,w,H,C,_,A,M,k,S,B,E,P,F,R,j,O,z,D,I,K,Q,V,X,et,nt,lt,rt,ot,ct;function ut(t,e){return t[2].length?W:T}let st=ut(e),it=st(e),ft=e[3]&&G(e),ht=e[0]&&J(e),at=e[1],dt=[];for(let t=0;t<at.length;t+=1)dt[t]=U(L(e,at,t));let pt=e[5],gt=[];for(let t=0;t<pt.length;t+=1)gt[t]=Y(N(e,pt,t));function mt(t,e){return null!==t[6]?tt:Z}let qt=mt(e),yt=qt(e);return{c(){n=f("main"),r=f("h1"),r.textContent="Death Bits",o=a(),d=f("div"),it.c(),m=a(),q=f("div"),ft&&ft.c(),y=a(),v=f("button"),v.textContent="Roll",b=a(),$=f("table"),x=f("thead"),w=f("tr"),H=f("th"),C=h("Bits"),A=a(),M=f("th"),M.textContent="Player",k=a(),ht&&ht.c(),S=a(),B=f("th"),E=a(),P=f("tbody");for(let t=0;t<dt.length;t+=1)dt[t].c();F=a(),R=f("button"),R.textContent="Add player",j=a(),O=f("button"),O.textContent="Reset game",z=a(),D=f("h2"),D.textContent="Probabilities",I=a(),K=f("table"),Q=f("thead"),Q.innerHTML='<tr class="svelte-16hqqup"><th class="svelte-16hqqup">Bit</th> \n        <th class="svelte-16hqqup">Probability</th></tr>',V=a(),X=f("tbody");for(let t=0;t<gt.length;t+=1)gt[t].c();et=a(),nt=f("tr"),lt=f("th"),lt.textContent="Avg.",rt=a(),ot=f("td"),yt.c(),g(d,"class","eyes svelte-16hqqup"),g(q,"class","bits svelte-16hqqup"),g(v,"class","big svelte-16hqqup"),g(H,"colspan",_=e[0]+1),g(H,"class","svelte-16hqqup"),g(M,"class","svelte-16hqqup"),g(B,"class","svelte-16hqqup"),g(w,"class","svelte-16hqqup"),g($,"class","svelte-16hqqup"),g(R,"class","big svelte-16hqqup"),g(O,"class","big svelte-16hqqup"),g(lt,"class","svelte-16hqqup"),g(ot,"class","svelte-16hqqup"),g(nt,"class","svelte-16hqqup"),g(K,"class","svelte-16hqqup"),g(n,"class","svelte-16hqqup"),ct=[p(v,"click",e[11]),p(R,"click",e[8]),p(O,"click",e[18])]},m(t,e){u(t,n,e),c(n,r),c(n,o),c(n,d),it.m(d,null),c(n,m),c(n,q),ft&&ft.m(q,null),c(n,y),c(n,v),c(n,b),c(n,$),c($,x),c(x,w),c(w,H),c(H,C),c(w,A),c(w,M),c(w,k),ht&&ht.m(w,null),c(w,S),c(w,B),c($,E),c($,P);for(let t=0;t<dt.length;t+=1)dt[t].m(P,null);c(n,F),c(n,R),c(n,j),c(n,O),c(n,z),c(n,D),c(n,I),c(n,K),c(K,Q),c(K,V),c(K,X);for(let t=0;t<gt.length;t+=1)gt[t].m(X,null);c(X,et),c(X,nt),c(nt,lt),c(nt,rt),c(nt,ot),yt.m(ot,null)},p(t,e){if(st===(st=ut(t))&&it?it.p(t,e):(it.d(1),it=st(t),it&&(it.c(),it.m(d,null))),t[3]?ft?ft.p(t,e):(ft=G(t),ft.c(),ft.m(q,null)):ft&&(ft.d(1),ft=null),1&e[0]&&_!==(_=t[0]+1)&&g(H,"colspan",_),t[0]?ht?ht.p(t,e):(ht=J(t),ht.c(),ht.m(w,S)):ht&&(ht.d(1),ht=null),1034&e[0]){let n;for(at=t[1],n=0;n<at.length;n+=1){const l=L(t,at,n);dt[n]?dt[n].p(l,e):(dt[n]=U(l),dt[n].c(),dt[n].m(P,null))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=at.length}if(160&e[0]){let n;for(pt=t[5],n=0;n<pt.length;n+=1){const l=N(t,pt,n);gt[n]?gt[n].p(l,e):(gt[n]=Y(l),gt[n].c(),gt[n].m(X,et))}for(;n<gt.length;n+=1)gt[n].d(1);gt.length=pt.length}qt===(qt=mt(t))&&yt?yt.p(t,e):(yt.d(1),yt=qt(t),yt&&(yt.c(),yt.m(ot,null)))},i:t,o:t,d(t){t&&s(n),it.d(),ft&&ft.d(),ht&&ht.d(),i(dt,t),i(gt,t),yt.d(),l(ct)}}}function nt(t){return t.reduce((t,e)=>t+e,0)}function lt(t,e){return t>>e&1}function rt(t){const e=t.target.value,n=document.createElement("span");n.textContent=e,document.body.appendChild(n);const l=n.offsetWidth;document.body.removeChild(n),t.target.style.minWidth=`${l+30}px`}function ot(t){return String.fromCharCode(9855+t)}function ct(t,e,n){let l,r,o,c,u,s,i;class f{constructor(){this.name="",this.bitHistory=[...Array(l),r.length],this.scoreHistory=Array(l).fill(0)}get currentBit(){return this.bitHistory[this.bitHistory.length-1]}set currentBit(t){this.bitHistory[this.bitHistory.length-1]=t}get currentScore(){return this.scoreHistory[this.scoreHistory.length-1]||0}}function h(){n(1,r=[...r,new f])}function a(){n(0,l=0),n(1,r=[]),n(2,o=[]),n(3,c=null),n(4,u="");for(let t=0;t<2;t++)h()}function d(){r.map(t=>t.currentScore);for(let t=0;t<r.length;t++)n(1,r[t].currentBit=t,r)}function p(t){l&&!confirm(`Remove player ${t+1}?`)||(r.splice(t,1),n(1,r),d())}const g=[[1]];function m(t,e){for(let e=g.length;e<=t;e++){g.push(Array(e).fill(0));for(let t=e;t<=6*e;t++){let n=0;for(let l=1;l<=6;l++){const r=t-l;e-1<=r&&r<=6*(e-1)&&(n+=g[e-1][r])}g[e].push(n)}}return g[t][e]}a();let q;return t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(7,q=Math.ceil(Math.pow(2,r.length-1)/6)),162&t.$$.dirty[0]){n(5,s=[]),n(5,s=Array(r.length).fill(0));for(let t=q;t<=6*q;t++){const e=m(q,t);console.log(t,e);for(let l=0;l<r.length;l++)n(5,s[l]+=e*lt(t,l),s)}n(6,i=nt(s)/(r.length*Math.pow(6,q)))}},[l,r,o,c,u,s,i,q,h,a,p,function(){n(2,o=[]);for(let t=0;t<q;t++)o.push(Math.floor(6*Math.random()+1));n(3,c=nt(o)),n(4,u=c.toString(2).padStart(r.length,"0"));for(let t=0;t<r.length;t++){let e=r[t].currentScore;lt(c,t)&&e++,r[t].scoreHistory.push(e),r[t].bitHistory.push(null)}d(),n(1,r),n(0,l++,l)},f,d,g,m,function(t){t.name=this.value,n(1,r)},t=>p(t),t=>{confirm("Reset game?")&&a()}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){super(),E(this,t,ct,et,o,{},[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
